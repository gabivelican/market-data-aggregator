# ============================================
# Environment Variables for Local Development
# ============================================
# These variables are used when running the application locally without Docker Secrets
# For Docker Compose, secrets are read from files in the ./secrets/ directory

# Database Configuration
DB_HOST=postgres
DB_PORT=5432
DB_NAME=market_db
DB_USER=postgres
# NOTE: In Docker, this password is read from /run/secrets/db_password
# For local development, this value is used
DB_PASSWORD=1q2w3e

# JWT Configuration
# NOTE: In Docker, the JWT secret is read from /run/secrets/jwt_secret
# This should be at least 64 characters long for HS512 algorithm
JWT_SECRET=mySecretKeyForJWTTokenGenerationAndValidationShouldBeLongEnoughForHS512Algorithm
JWT_EXPIRATION=86400000

# Internal API Configuration (C++ â†” Gateway communication)
# NOTE: In Docker, this secret is read from /run/secrets/api_key
# IMPORTANT: Change this value in production!
INTERNAL_SECRET=supersecret123-change-in-production

# C++ Analysis Service Configuration
ANALYSIS_SERVICE_URL=http://analysis-service:8081

# Server Ports
GATEWAY_PORT=8080
ANALYSIS_PORT=8081

# Analysis Parameters
SPIKE_THRESHOLD_PERCENT=5.0
VOLUME_MULTIPLIER=3
SMA_WINDOW_SIZE=5
EMA_WINDOW_SIZE=15
VOLATILITY_THRESHOLD=2.0
AGGREGATION_INTERVAL_SECONDS=60

# ============================================
# Secret Management (Docker Compose)
# ============================================
# When using Docker Compose with Docker Secrets:
# 1. Create secret files in ./secrets/ directory:
#    - ./secrets/db_password.txt (contains database password)
#    - ./secrets/jwt_secret.txt (contains JWT signing secret)
#    - ./secrets/api_key.txt (contains internal API key)
#
# 2. Docker Secrets are automatically mounted at:
#    - /run/secrets/db_password (inside containers)
#    - /run/secrets/jwt_secret (inside containers)
#    - /run/secrets/api_key (inside containers)
#
# 3. Applications read secrets with this priority:
#    a) Docker Secret file (/run/secrets/*)
#    b) Environment variable (DB_PASSWORD, JWT_SECRET, INTERNAL_SECRET)
#    c) Hardcoded default value (fallback only)
#
# Create secrets with:
# echo "your_password" > secrets/db_password.txt
# echo "your_jwt_secret_long_string" > secrets/jwt_secret.txt
# echo "your_api_key" > secrets/api_key.txt
